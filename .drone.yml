kind: pipeline
name: default

steps:
 - name: compile
   image: lagmoellertim/google-clojure-compiler
   commands:
     - mkdir dist
     - compile --js hello.js --js_output_file dist/compiled.js

 - name: publish
   image: plugins/github-release
   settings:
     api_key: "15ac53e189d832d1a1528d8e1c7b371df7d339fb"
     files: dist/compiled.js
   when:
     event: tag
